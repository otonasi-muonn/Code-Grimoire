Code Grimoire UI/UX 改修計画書：Readable Grimoire
1. コンセプト
「深淵を覗くとき、深淵もまたこちらを見ている」
（When you gaze into the abyss, the abyss also gazes into you.）

これまでの「雰囲気重視の魔法陣」から、「開発者が状況を正確に把握するための計器（Cockpit）」 へと進化させます。魔法的な没入感を維持しつつ、情報の**「視認性（Visibility）」と「操作の予測可能性（Predictability）」**を最優先します。

2. デザイン修正計画
Phase 1: 視界の明瞭化 (The Eye of Truth)
標準以外のモード（Rune Mode）や、通常時の線の描画において、「見えない」ストレスを解消します。

Runeモードの非活性表現

現状: 透明度を極端に下げて（Alpha 0.1）、存在を消している。

変更: 「消す」のではなく**「石化させる（Dormant）」**表現に変更します。

具体案: 透明度は落としすぎず（Alpha 0.3〜0.4程度）、代わりに彩度を落としてグレーアウトさせます。これにより、「そこに関係ないノードがある」という構造情報自体は維持されます。

エッジ（接続線）の強化

現状: 繊細すぎる極細線。

変更: **「魔力のパス」**として、物理的な視認性を上げます。

具体案: ベースの線の太さを倍増させ、不透明度を上げます。さらに、重要な依存関係（Strong Dependency）はより明るく発光させ、型定義のみ（Type Import）は点線や少し暗い色にするなど、**「線の質」**で情報を描き分けます。

Phase 2: 世界樹の再構築 (Replanting Yggdrasil)
円形樹形図（Radial Tree）の「どこが起点かわからない」問題を解決します。

レイアウトの変更

現状: 放射状に広がる円形配置。

変更: 「重力に従う大樹」（Standard Tree Layout）へ。

具体案: 画面上部（または左）にルート（根）を置き、下（または右）に向かって枝葉が広がる、古典的かつ最も理解しやすい階層構造を採用します。これにより、「データの流れ」や「親子関係」が一目で直感的に理解できるようになります。

Phase 3: 「鑑定」アクションの統合 (Unifying the Inspection)
右クリックの挙動をOS標準メニューではなく、アプリケーション内の体験として統合します。

右クリックの挙動変更

現状: いきなりVS Codeのエディタへジャンプする（唐突感）。

変更: **「詳細パネル（右側のメニュー）を開く」**アクションへ統一。

具体案:

左クリック: 「召喚 (Summon)」 - そのノードを中心に世界を再構築する（視点移動あり）。

右クリック: 「鑑定 (Inspect)」 - 視点は動かさず、対象ノードのステータス詳細を右側のパネルに表示する。

メリット: 「ちょっと中身を確認したいだけ」の時に画面が動いてしまうストレスを防げます。また、右側のパネル内に「ファイルを開く」「コードをプレビューする」ボタンを配置することで、全ての操作のハブとして機能させます。

Phase 4: 魔導書の歩き方 (The Grimoire Manual)
操作方法がわからないユーザーのための導線を確保します。

ヘルプ・凡例の実装

現状: 手探り。

変更: 画面上に常にアクセス可能な**「ヘルプのルーン（？アイコン）」**を配置。

具体案:

クリックすると、画面全体を覆うのではなく、古文書のページのようなオーバーレイが表示されます。

操作説明: マウス操作（パン、ズーム、クリック）の図解。

凡例（Legend）: 「赤い線＝循環参照」「点線＝型依存」「グレーの丸＝外部ライブラリ」など、記号の意味を明記します。

3. UI画面イメージ構成案
メイン画面 (Canvas)
背景: 深い紺色をベースに、ノードの光が映えるコントラストを確保。

ノード: Runeモード時は、対象外ノードを「暗い石」のように表現し、対象ノードを「輝く宝石」のように際立たせる。

右側パネル (Inspection Panel)
右クリックでスライドインするパネルの構成です。

Header: ファイル名とアイコン（TS/JSロゴなど）。

Actions (新規):

「ファイルを開く (Open File)」ボタン

「ここを中心に再構築 (Summon)」ボタン

Status: 行数、依存数などの基本スタッツ（バーグラフ等で可視化）。

Relationships: 依存しているファイル、されているファイルのリスト。

Code Peek: 簡易コードプレビュー。

ヘルプオーバーレイ
画面右下に半透明の「？」ボタンを配置。

押すと、「操作一覧」と「記号の意味」が記載された羊皮紙風（あるいはホログラム風）のウィンドウがポップアップする。